window.typeOf||(window.typeOf=function(a){var b=typeof a;"object"===b&&(a?a instanceof Array&&(b="array"):b="null");return b});window.console||(window.console={log:function(){}});var gmap=gmap||{};
(function(){gmap._=window._||function(){var a={},b={},d=Array.prototype.slice,c=Array.prototype.forEach,g=a.each=a.forEach=function(a,f,d){if(null!=a)if(c&&a.forEach===c)a.forEach(f,d);else if(a.length===+a.length)for(var g=0,j=a.length;g<j&&!(g in a&&f.call(d,a[g],g,a)===b);g++);else for(g in a)if(hasOwnProperty.call(a,g)&&f.call(d,a[g],g,a)===b)break};a.extend=function(a){g(d.call(arguments,1),function(b){for(var d in b)void 0!==b[d]&&(a[d]=b[d])});return a};return a}();google.maps.LatLng.prototype.toGeoJSON=
function(){return[this.lng(),this.lat()]};google.maps.MVCArray.prototype.toGeoJSON=function(){for(var a=this.getArray(),b=[],d=0,c=a.length;d<c;d++)b.push(a[d].toGeoJSON());return b};gmap.Feature=function(a){function b(){g.setHighlighted(!0)}function d(){g.setHighlighted(!1)}function c(){g.getSelected()?g.setSelected(!1):g.setSelected(!0)}var g=this;this.id=a.id;this.polygons=[];a.fields&&(this.fields=a.fields);this.controller=a.controller;this._highlighted=this._selected=!1;this.highlightCallback=
a.highlightCallback;this.selectCallback=a.selectCallback;var e=function(){return{}};this._responsive_unselected_poly_options=null==a.responsive_unselected_opts?e:a.responsive_unselected_opts;this._responsive_highlighted_poly_options=null==a.responsive_highlighted_opts?e:a.responsive_highlighted_opts;this._responsive_selected_poly_options=null==a.responsive_selected_opts?e:a.responsive_selected_opts;this.unselected_poly_options=a.color?gmap._.extend({},this._unselected_poly_options,{fillColor:a.color}):
gmap._.extend({},this._unselected_poly_options);for(var e=0,f=a.multipolygon.length;e<f;e++)this.polygons.push(new google.maps.Polygon(gmap._.extend({},this.unselected_poly_options,this._responsive_unselected_poly_options(),{paths:a.multipolygon[e],map:a.map}))),google.maps.event.addListener(this.polygons[e],"mousemove",b),google.maps.event.addListener(this.polygons[e],"mouseout",d),google.maps.event.addListener(this.polygons[e],"click",c)};gmap.Feature.prototype={_unselected_poly_options:{clickable:!0,
fillColor:"#AAAAAA",strokeColor:"#000000",strokeWeight:1,strokeOpacity:0.25},_selected_poly_options:{strokeOpacity:1,strokeWeight:1,strokeColor:"#0000FF"},_highlighted_poly_options:{strokeOpacity:1,strokeWeight:1,strokeColor:"#00FF00"},remove:function(){for(var a=0,b=this.polygons.length;a<b;a++)google.maps.event.clearListeners(this.polygons[a],"mousemove"),google.maps.event.clearListeners(this.polygons[a],"mouseout"),this.polygons[a].setMap(null);this.polygons=this.controller=null},toGeoJSON:function(){for(var a=
[],b=0,d=this.polygons.length;b<d;b++)a.push(this.polygons[b].getPaths().toGeoJSON());return a},redraw:function(){var a=gmap._.extend({},this.unselected_poly_options,this._responsive_unselected_poly_options());this._highlighted&&(a=gmap._.extend(a,this._highlighted_poly_options,this._responsive_highlighted_poly_options()));this._selected&&(a=gmap._.extend(a,this._selected_poly_options,this._responsive_selected_poly_options()));for(i=0,len=this.polygons.length;i<len;i++)this.polygons[i].setOptions(a)},
getSelected:function(){return this._selected},setSelected:function(a){!0===a?(null!==this.controller.selected&&this.controller.selected.setSelected(!1),this._selected=!0,this.controller.selected=this,this.redraw(),this.selectCallback&&this.selectCallback()):!1===a&&(this._selected=!1,this.redraw())},getHighlighted:function(){return this._highlighted},setHighlighted:function(a){!0===a&&!1===this._highlighted?(this._highlighted=!0,this.redraw(),this.highlightCallback&&this.highlightCallback()):!1===
a&&!0===this._highlighted&&(this._highlighted=!1,this.redraw())}}})();window.typeOf||(window.typeOf=function(a){var b=typeof a;"object"===b&&(a?a instanceof Array&&(b="array"):b="null");return b});window.console||(window.console={log:function(){}});gmap=gmap||{};gmap.geom=gmap.geom||{};
gmap.geom.ParseGeoJSONMultiPolygon=function(a){var b,d,c,g,e,f,k=[],h,j;for(b=0,d=a.length;b<d;b++){h=[];for(c=0,g=a[b].length;c<g;c++){j=[];for(e=0,f=a[b][c].length;e<f;e++)j.push(new google.maps.LatLng(a[b][c][e][1],a[b][c][e][0]));h.push(j)}k.push(h)}return k};gmap.geom.ParseGeoJSONPolygon=function(a){var b,d,c,g,e=[],f;for(b=0,d=a.length;b<d;b++){f=[];for(c=0,g=a[b].length;c<g;c++)f.push(new google.maps.LatLng(a[b][c][1],a[b][c][0]));e.push(f)}return e};
gmap.geom.ParseKMLPolygon=function(a){return[$.map($(a).find("coordinates"),function(a){a=$(a).text().split(/\s+/);return[$.map(a,function(a){if(""!==a)return new google.maps.LatLng(parseFloat($.trim(a).split(",")[1]),parseFloat($.trim(a).split(",")[0]))})]})]};gmap.geom.ParseKMLMultiPolygon=function(a){return $.map($(a).find("Polygon"),function(a){return gmap.geom.ParseKMLPolygon(a)})};gmap=gmap||{};
(function(){function a(a){var d;try{d=$($.parseXML(a))}catch(c){d=$(a)}d=$.map(d.find("Placemark"),function(a){var b={};$placemark=$(a);b.geometry=$placemark.find("MultiGeometry")[0];"undefined"==typeOf(b.geometry)&&(b.geometry=$placemark.find("Polygon")[0]);b.id=$placemark.find("name").text();b.properties={};for(var a=$placemark.find("ExtendedData Data"),d,c,h=0,j=a.length;h<j;h++)d=$(a[h]),c=d.find("value").text(),isNaN(parseFloat(c))||(c=Number(c)),b.properties[d.attr("name")]=c;return b});window.kml=
a;return d}gmap.load_polygons=function(b){var d={},c=b.data,g={selected:null},c="kml"==b.data_type?a(c):c.features;b.unselected_opts&&gmap._.extend(gmap.Feature.prototype._unselected_poly_options,b.unselected_opts);b.highlighted_opts&&gmap._.extend(gmap.Feature.prototype._highlighted_poly_options,b.highlighted_opts);b.selected_opts&&gmap._.extend(gmap.Feature.prototype._selected_poly_options,b.selected_opts);for(var e,f=0,k=c.length;f<k;f++)e="array"!==typeOf(c[f].geometry.coordinates)?"Polygon"==
c[f].geometry.tagName?gmap.geom.ParseKMLPolygon(c[f].geometry):gmap.geom.ParseKMLMultiPolygon(c[f].geometry):"Polygon"==c[f].geometry.type?[gmap.geom.ParseGeoJSONPolygon(c[f].geometry.coordinates)]:gmap.geom.ParseGeoJSONMultiPolygon(c[f].geometry.coordinates),e={id:c[f].id,multipolygon:e,fields:c[f].properties,controller:g,map:b.map},b.getColor&&(e.color=b.getColor(c[f].properties)),e.responsive_unselected_opts=b.responsive_unselected_opts,e.responsive_highlighted_opts=b.responsive_highlighted_opts,
e.responsive_selected_opts=b.responsive_selected_opts,e.highlightCallback=b.highlightCallback,e.selectCallback=b.selectCallback,d[c[f].id]=new gmap.Feature(e);return d};gmap.remove_polygons=function(a){for(var d in a)a.hasOwnProperty(d)&&(a[d].remove(),delete a[d]);return a}})();
