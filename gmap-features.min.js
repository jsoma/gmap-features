window.typeOf||(window.typeOf=function(a){var b=typeof a;"object"===b&&(a?a instanceof Array&&(b="array"):b="null");return b});window.console||(window.console={log:function(){}});var gmap=gmap||{};
(function(){gmap._=window._||function(){var a={},b={},e=Array.prototype.slice,c=Array.prototype.forEach,g=a.each=a.forEach=function(a,e,g){if(null!=a)if(c&&a.forEach===c)a.forEach(e,g);else if(a.length===+a.length)for(var h=0,k=a.length;h<k&&!(h in a&&e.call(g,a[h],h,a)===b);h++);else for(h in a)if(hasOwnProperty.call(a,h)&&e.call(g,a[h],h,a)===b)break};a.extend=function(a){g(e.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])});return a};return a}();google.maps.LatLng.prototype.toGeoJSON=
function(){return[this.lng(),this.lat()]};google.maps.MVCArray.prototype.toGeoJSON=function(){for(var a=this.getArray(),b=[],e=0,c=a.length;e<c;e++)b.push(a[e].toGeoJSON());return b};gmap.Feature=function(a){function b(){g.setHighlighted(!0)}function e(){g.setHighlighted(!1)}function c(){g.getSelected()?g.setSelected(!1):g.setSelected(!0)}var g=this;this.id=a.id;this.polygons=[];a.fields&&(this.fields=a.fields);this.controller=a.controller;this._highlighted=this._selected=!1;this.highlightCallback=
a.highlightCallback;this.selectCallback=a.selectCallback;var d=function(){return{}};this._responsive_unselected_poly_options=null==a.responsive_unselected_opts?d:a.responsive_unselected_opts;this._responsive_highlighted_poly_options=null==a.responsive_highlighted_opts?d:a.responsive_highlighted_opts;this._responsive_selected_poly_options=null==a.responsive_selected_opts?d:a.responsive_selected_opts;this.unselected_poly_options=a.color?gmap._.extend({},this._unselected_poly_options,{fillColor:a.color}):
gmap._.extend({},this._unselected_poly_options);for(var d=0,f=a.multipolygon.length;d<f;d++)this.polygons.push(new google.maps.Polygon(gmap._.extend({},this.unselected_poly_options,this._responsive_unselected_poly_options(),{paths:a.multipolygon[d],map:a.map}))),google.maps.event.addListener(this.polygons[d],"mousemove",b),google.maps.event.addListener(this.polygons[d],"mouseout",e),google.maps.event.addListener(this.polygons[d],"click",c)};gmap.Feature.prototype={_unselected_poly_options:{clickable:!0,
fillColor:"#AAAAAA",strokeColor:"#000000",strokeWeight:1,strokeOpacity:0.25},_selected_poly_options:{strokeOpacity:1,strokeWeight:1,strokeColor:"#0000FF"},_highlighted_poly_options:{strokeOpacity:1,strokeWeight:1,strokeColor:"#00FF00"},remove:function(){for(var a=0,b=this.polygons.length;a<b;a++)google.maps.event.clearListeners(this.polygons[a],"mousemove"),google.maps.event.clearListeners(this.polygons[a],"mouseout"),this.polygons[a].setMap(null);this.polygons=this.controller=null},toGeoJSON:function(){for(var a=
[],b=0,e=this.polygons.length;b<e;b++)a.push(this.polygons[b].getPaths().toGeoJSON());return a},redraw:function(){var a=gmap._.extend({},this.unselected_poly_options,this._responsive_unselected_poly_options());this._highlighted&&(a=gmap._.extend(a,this._highlighted_poly_options,this._responsive_highlighted_poly_options()));this._selected&&(a=gmap._.extend(a,this._selected_poly_options,this._responsive_selected_poly_options()));for(i=0,len=this.polygons.length;i<len;i++)this.polygons[i].setOptions(a)},
getSelected:function(){return this._selected},setSelected:function(a){!0===a?(null!==this.controller.selected&&this.controller.selected.setSelected(!1),this._selected=!0,this.controller.selected=this,this.redraw(),this.selectCallback&&this.selectCallback()):!1===a&&(this._selected=!1,this.redraw())},getHighlighted:function(){return this._highlighted},setHighlighted:function(a){!0===a&&!1===this._highlighted?(this._highlighted=!0,this.redraw(),this.highlightCallback&&this.highlightCallback()):!1===
a&&!0===this._highlighted&&(this._highlighted=!1,this.redraw())}}})();window.typeOf||(window.typeOf=function(a){var b=typeof a;"object"===b&&(a?a instanceof Array&&(b="array"):b="null");return b});window.console||(window.console={log:function(){}});gmap=gmap||{};gmap.geom=gmap.geom||{};
gmap.geom.ParseGeoJSONMultiPolygon=function(a){var b,e,c,g,d,f,j=[],h,k;for(b=0,e=a.length;b<e;b++){h=[];for(c=0,g=a[b].length;c<g;c++){k=[];for(d=0,f=a[b][c].length;d<f;d++)k.push(new google.maps.LatLng(a[b][c][d][1],a[b][c][d][0]));h.push(k)}j.push(h)}return j};gmap.geom.ParseGeoJSONPolygon=function(a){var b,e,c,g,d=[],f;for(b=0,e=a.length;b<e;b++){f=[];for(c=0,g=a[b].length;c<g;c++)f.push(new google.maps.LatLng(a[b][c][1],a[b][c][0]));d.push(f)}return d};
gmap.geom.ParseKMLMultiPolygon=function(a){return $.map($(a).find("Polygon"),function(a){return[$.map($(a).find("coordinates"),function(a){a=$(a).text().split(/\s+/);return[$.map(a,function(a){if(""!==a)return new google.maps.LatLng(parseFloat($.trim(a).split(",")[1]),parseFloat($.trim(a).split(",")[0]))})]})]})};gmap=gmap||{};
(function(){function a(a){a=$(a);return $.map(a.find("Placemark"),function(a){var b={};$placemark=$(a);b.geometry=$placemark.find("MultiGeometry")[0];"undefined"==typeOf(b.geometry)&&(a=$("<MultiGeometry></MultiGeometry>").appendTo($placemark),$placemark.find("Polygon").appendTo(a),b.geometry=a[0]);b.id=$placemark.find("name").text();b.properties={};for(var a=$placemark.find("ExtendedData Data"),g,d,f=0,j=a.length;f<j;f++)g=$(a[f]),d=g.find("value").text(),isNaN(parseFloat(d))||(d=Number(d)),b.properties[g.attr("name")]=
d;return b})}gmap.load_polygons=function(b){var e={},c=b.data,g={selected:null},c="kml"==b.data_type?a(c):c.features;b.unselected_opts&&gmap._.extend(gmap.Feature.prototype._unselected_poly_options,b.unselected_opts);b.highlighted_opts&&gmap._.extend(gmap.Feature.prototype._highlighted_poly_options,b.highlighted_opts);b.selected_opts&&gmap._.extend(gmap.Feature.prototype._selected_poly_options,b.selected_opts);for(var d,f=0,j=c.length;f<j;f++)d="array"!==typeOf(c[f].geometry.coordinates)?gmap.geom.ParseKMLMultiPolygon(c[f].geometry):
"Polygon"==c[f].geometry.type?[gmap.geom.ParseGeoJSONPolygon(c[f].geometry.coordinates)]:gmap.geom.ParseGeoJSONMultiPolygon(c[f].geometry.coordinates),d={id:c[f].id,multipolygon:d,fields:c[f].properties,controller:g,map:b.map},b.getColor&&(d.color=b.getColor(c[f].properties)),d.responsive_unselected_opts=b.responsive_unselected_opts,d.responsive_highlighted_opts=b.responsive_highlighted_opts,d.responsive_selected_opts=b.responsive_selected_opts,d.highlightCallback=b.highlightCallback,d.selectCallback=
b.selectCallback,e[c[f].id]=new gmap.Feature(d);return e};gmap.remove_polygons=function(a){for(var e in a)a.hasOwnProperty(e)&&(a[e].remove(),delete a[e]);return a}})();
